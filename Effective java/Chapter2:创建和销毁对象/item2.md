# Item2 : 遇到多个构造器参数时要考虑用构建器

## 构建对象有大量可选参数，现实开发的解决方案

遇到大量可选参数，无论是item1提到的静态工厂方法还是常用的公有构造器，都不能很好很精确地解决问题，常常使代码里对象的创建变得复杂、难以扩展。通过公有构造方法最糟，因为我们往往只能无限地增加构造方法（重叠构造器模式），对于不想设置的参数，我们还得给它们设置默认值（默认值是可能有争议的，往往设置为0，但需求变动可能导致0在某些地方是特殊值，造成后期为默认值的维护增加困难）。对于静态工厂方法也一样，虽然相对于前者有一定优势，但是它也无法摆脱可选参数增加导致的方法数无限增加。

## JavaBean可否解决？

Javabean模式，即通过无参构造方法来创建对象，然后通过setter方法来设置每一个必要的参数，弥补了重叠构造器模式的不足。但是JavaBean有线程安全问题，即它是通过创建对象后，再设置参数，这点就不能保证客户端调用这个对象时，对象是不是处于构造完成的状态，需要额外保证线程安全。

## Builder模式

创建一个Builder对象，通过setter方法设置必要参数值，设置完再通过build方法生成目标对象。

### 优点：

* 1、除了参数设置清晰，容易阅读的优点，更深的是，参数的检验移到构建Builder对象的setter方法中，提前检验参数并抛出或处理异常，而不是等到创建目标对象之后进行。
* 2、安全性好，通过创建完Builder对象，在builder方法里把新建目标对象设置好，再提供给客户端使用，这时就没有对象状态未初始完、不统一的线程不安全问题。
* 3、可以利用单个Builder创建多个目标对象。

### 缺点：
必须创建构建器Buidler，才能得到目标对象，参数少或者注重性能的地方，这种冗长的代码模式就没有优势。

总结：如果类的创建有多个参数可设置，因为参数的组合多种多样，Buidler模式可使参数的设置流程清晰，扩展方便，阅读更容易，安全性能也比JavaBean好。